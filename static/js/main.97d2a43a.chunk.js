(this["webpackJsonpreact-calendar"]=this["webpackJsonpreact-calendar"]||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},31:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(16),i=n(4),o=n(3),r=n.n(o),l=(n(26),["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]),d="YYYY-MM-DD",s="YYYY",u={title:"",place:"",time:"09:00",description:""};function j(){return r()().format(d)}function b(e,t){return r()("".concat(t,"-").concat(e,"-01"),d)}function m(e,t){var n=Array.from(Array(function(e,t){return b(e,t).daysInMonth()}(e,t)),(function(e,t){return t+1}));return n.map((function(n){return{dayOfMonth:n,date:r()("".concat(t,"-").concat(e,"-").concat(n),d).format(d),isCurrentMonth:!0}}))}var f=n(14),h=n(13),O=n(6),v=n(5),x=n(12),y=(n(27),n(28),n(9)),p=n(7);n(31);var M=n(0);function N(e){var t=e.title,n=e.subtitle,c=e.isVisible,i=e.isDisabled,o=e.handleClose,r=e.handleSave,l=e.handleDelete,d=void 0===l?function(){return null}:l,s=e.children,u=Object(a.useRef)();!function(e,t){Object(a.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}(u,o);var j=function(e){if("Escape"===e.key)o()};return Object(a.useEffect)((function(){return document.addEventListener("keydown",j),function(){return document.removeEventListener("keydown",j)}})),c&&Object(M.jsx)("div",{className:"modal","aria-modal":"true",children:Object(M.jsxs)("form",{className:"modal-main",onSubmit:r,ref:u,children:[Object(M.jsxs)("header",{className:"modal-header",children:[Object(M.jsxs)("div",{children:[Object(M.jsx)("h2",{className:"modal-title",children:t}),Object(M.jsx)("p",{className:"modal-subtitle",children:n})]}),Object(M.jsx)("button",{type:"button",className:"modal-close",onClick:o,autoFocus:!0,children:Object(M.jsx)(y.a,{icon:p.e})})]}),Object(M.jsx)("div",{className:"modal-body",children:s}),Object(M.jsxs)("div",{className:"modal-actions",children:[d&&Object(M.jsx)("button",{type:"button",className:"modal-action-delete",onClick:d,children:"Delete"}),Object(M.jsx)("button",{type:"button",className:"modal-action-cancel",onClick:o,children:"Cancel"}),Object(M.jsx)("button",{type:"submit",className:"modal-action-save",disabled:i,children:"Save"})]})]})})}function C(e){var t=e.modalVisible,n=e.handleModalClose,c=e.handleModalSave,o=e.handleModalDelete,l=e.initialModalData,d=e.isEditingEvent,s=e.dateSelected,j=Object(a.useState)(u),b=Object(i.a)(j,2),m=b[0],f=b[1],h=!!m.title&&!!m.time,x=Object(a.useState)(h),y=Object(i.a)(x,2),p=y[0],C=y[1];function S(e){var t=e.target;f((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(O.a)({},t.name,t.value))}))}return Object(a.useEffect)((function(){l&&f(l)}),[l]),Object(a.useEffect)((function(){if(!m.title||!m.time)return C(!1);C(!0)}),[m.title,m.time]),Object(M.jsxs)(N,{title:d?"Edit the event":"Add a new event",subtitle:r()(s).format("ddd, D MMM"),isVisible:t,isDisabled:!p,handleClose:n,handleSave:function(e){e.preventDefault(),c(m)},handleDelete:d&&o.bind(null,m),children:[Object(M.jsxs)("section",{className:"modal-field",children:[Object(M.jsx)("label",{htmlFor:"modal_field_title",children:"Title *"}),Object(M.jsx)("input",{type:"text",name:"title",id:"modal_field_title",value:m.title,onChange:S})]}),Object(M.jsxs)("section",{className:"modal-field",children:[Object(M.jsx)("label",{htmlFor:"modal_field_place",children:"Place"}),Object(M.jsx)("input",{type:"text",name:"place",id:"modal_field_place",value:m.place,onChange:S})]}),Object(M.jsxs)("section",{className:"modal-field",children:[Object(M.jsx)("label",{htmlFor:"modal_field_time",children:"Time *"}),Object(M.jsx)("input",{type:"time",name:"time",id:"modal_field_time",value:m.time,onChange:S,step:900})]}),Object(M.jsxs)("section",{className:"modal-field",children:[Object(M.jsx)("label",{htmlFor:"modal_field_description",children:"Description"}),Object(M.jsx)("textarea",{name:"description",id:"modal_field_description",value:m.description,onChange:S})]}),Object(M.jsx)("div",{className:"modal-info",children:"Mandatory fields (*)"})]})}var S=n(8),g=n.n(S);n(33),n(34);function w(e){var t=e.day,n=e.handleModalOpen,c=Object(a.useState)(!1),o=Object(i.a)(c,2),r=o[0],l=o[1],d=function(){return l(!r)};return Object(M.jsxs)("button",{className:"day-of-month-wrapper",onClick:function(){return n(t)},onMouseEnter:d,onMouseLeave:d,title:"Add a new event",children:[Object(M.jsx)("span",{className:g()("day-of-month day-of-month-text",r?"invisible":"visible"),children:t.dayOfMonth}),Object(M.jsx)("span",{className:g()("day-of-month day-of-month-icon",r?"visible":"invisible"),children:Object(M.jsx)(y.a,{icon:p.b})})]})}function k(e){var t=e.day,n=e.eventData,a=e.handleModalOpen,c=g()("calendar-day",{"is-current":t.isCurrentMonth,"is-today":t.date===j()});return Object(M.jsxs)("div",{className:c,children:[Object(M.jsx)(w,{day:t,handleModalOpen:a}),n&&Object(M.jsx)("ul",{className:"day-events",children:Object.keys(n).sort((function(e,t){return e.localeCompare(t)})).map((function(e){var c=n[e];return Object(M.jsx)("li",{className:"day-event",onClick:function(){return a(t,c)},title:"Edit event",children:Object(M.jsx)("div",{children:c.title})},"".concat(t.date,"_").concat(c.time))}))})]})}function E(e){var t=e.month,n=e.year,c=Object(a.useState)(!1),o=Object(i.a)(c,2),l=o[0],s=o[1],j=Object(a.useState)(""),y=Object(i.a)(j,2),p=y[0],N=y[1],S=function(e,t){var n=Object(a.useState)((function(){if("undefined"===typeof window)return t;try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(a){return console.log(a),t}})),c=Object(i.a)(n,2),o=c[0],r=c[1];return[o,function(t){try{var n=t instanceof Function?t(o):t;r(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(a){console.log(a)}}]}("Calendar::events",{}),g=Object(i.a)(S,2),w=g[0],E=g[1],D=Object(a.useState)(u),_=Object(i.a)(D,2),Y=_[0],A=_[1],F=b(t,n),L=m(t,n),T=function(e,t){var n=r()(t).weekday(),a=e.subtract(1,"month"),c=n?n-1:6,i=r()(t).subtract(c,"day").date();return Array.from(Array(c),(function(){return i++})).map((function(e){return{date:r()("".concat(a.year(),"-").concat(a.month()+1,"-").concat(e),d).format(d),dayOfMonth:e,isCurrentMonth:!1}}))}(F.clone(),L[0].date),I=function(e,t){var n=r()(t).weekday(),a=e.add(1,"month"),c=n?7-n:n;return Array.from(Array(c),(function(e,t){return t+1})).map((function(e){return{date:r()("".concat(a.year(),"-").concat(a.month()+1,"-").concat(e),d).format(d),dayOfMonth:e,isCurrentMonth:!1}}))}(F.clone(),L.slice(-1)[0].date),J=[].concat(Object(x.a)(T),Object(x.a)(L),Object(x.a)(I)),V=!(!Y||!Y.title);function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;N(e.date),A(t),s(!0)}return Object(a.useEffect)((function(){l||A(u)}),[l]),Object(M.jsxs)(a.Fragment,{children:[Object(M.jsx)("section",{className:"calendar-days",children:J.map((function(e){return Object(M.jsx)(k,{day:e,handleModalOpen:P,eventData:w[e.date]},e.date)}))}),Object(M.jsx)(C,{modalVisible:l,handleModalClose:function(){s(!1)},handleModalSave:function(e){E((function(t){return Object(v.a)(Object(v.a)({},t),{},Object(O.a)({},p,Object(v.a)(Object(v.a)({},t[p]),{},Object(O.a)({},e.time,e))))})),s(!1)},handleModalDelete:function(e){window.confirm("Are you sure you want to delete the event?")&&(E((function(t){var n=t[p],a=e.time,c=(n[a],Object(f.a)(n,[a].map(h.a))),i=Object.keys(c).length?Object(O.a)({},p,Object(v.a)({},c)):null;if(!i){t[p];var o=Object(f.a)(t,[p].map(h.a));return Object(v.a)({},o)}return Object(v.a)(Object(v.a)({},t),i)})),s(!1))},initialModalData:Y,isEditingEvent:V,dateSelected:p})]})}n(35);var D={left:p.c,right:p.d,today:p.a};function _(e){var t=e.iconName,n=e.callback,a=e.title,c=e.cssClass;return Object(M.jsx)("button",{className:g()("header-action","icon-btn",c),title:a,onClick:function(){return n()},children:Object(M.jsx)(y.a,{icon:D[t]})})}function Y(e){var t=e.month,n=void 0===t?r()().format("M"):t,c=e.year,o=void 0===c?r()().format(s):c,d=r()(new Date(o,n-1,1)),u=Object(a.useState)({date:d}),b=Object(i.a)(u,2),m=b[0],f=b[1];return console.log(m.date.toString()),Object(M.jsxs)("article",{className:"calendar",children:[Object(M.jsxs)("header",{className:"calendar-header",children:[Object(M.jsx)(_,{title:"Previous month",iconName:"left",callback:function(){f((function(e){return{date:e.date.clone().subtract(1,"month")}}))},cssClass:"action-previous"}),Object(M.jsx)("div",{className:"header-selected-month",children:m.date.format("MMMM YYYY")}),Object(M.jsx)(_,{title:"Today",iconName:"today",callback:function(){f({date:r()(j())})}}),Object(M.jsx)(_,{title:"Next month",iconName:"right",callback:function(){f((function(e){return{date:e.date.clone().add(1,"month")}}))},cssClass:"action-next"})]}),Object(M.jsx)("section",{className:"day-of-week",children:l.map((function(e){return Object(M.jsx)("div",{children:e},e)}))}),Object(M.jsx)(E,{month:m.date.format("M"),year:m.date.format(s)})]})}n(36),n(37);function A(){return Object(M.jsx)("div",{className:"App",children:Object(M.jsx)(Y,{})})}var F=document.getElementById("root");Object(c.createRoot)(F).render(Object(M.jsx)(a.StrictMode,{children:Object(M.jsx)(A,{})}))}},[[38,1,2]]]);
//# sourceMappingURL=main.97d2a43a.chunk.js.map